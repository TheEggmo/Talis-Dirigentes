[gd_scene load_steps=15 format=2]

[ext_resource path="res://Units/Player/Player.tscn" type="PackedScene" id=1]
[ext_resource path="res://Objects/Portal/Portal.tscn" type="PackedScene" id=2]
[ext_resource path="res://icon.png" type="Texture" id=3]
[ext_resource path="res://Objects/Dice/Dice.tscn" type="PackedScene" id=4]
[ext_resource path="res://Objects/XP/XP.tscn" type="PackedScene" id=5]
[ext_resource path="res://brick.png" type="Texture" id=6]
[ext_resource path="res://LevelOptions.tscn" type="PackedScene" id=7]
[ext_resource path="res://SpawnController.gd" type="Script" id=8]
[ext_resource path="res://DiceSpawner.gd" type="Script" id=9]
[ext_resource path="res://GameOverHud.gd" type="Script" id=10]

[sub_resource type="ConvexPolygonShape2D" id=3]
points = PoolVector2Array( 32, 32, 0, 32, 0, 0, 32, 0 )

[sub_resource type="ConvexPolygonShape2D" id=5]
points = PoolVector2Array( 32, 32, 0, 32, 0, 0, 32, 0 )

[sub_resource type="TileSet" id=4]
0/name = "icon.png 0"
0/texture = ExtResource( 3 )
0/tex_offset = Vector2( 0, 0 )
0/modulate = Color( 1, 1, 1, 1 )
0/region = Rect2( 0, 0, 32, 32 )
0/tile_mode = 0
0/occluder_offset = Vector2( 0, 0 )
0/navigation_offset = Vector2( 0, 0 )
0/shape_offset = Vector2( 0, 0 )
0/shape_transform = Transform2D( 1, 0, 0, 1, 0, 0 )
0/shape = SubResource( 3 )
0/shape_one_way = false
0/shape_one_way_margin = 1.0
0/shapes = [ {
"autotile_coord": Vector2( 0, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 3 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
} ]
0/z_index = 0
1/name = "brick.png 1"
1/texture = ExtResource( 6 )
1/tex_offset = Vector2( 0, 0 )
1/modulate = Color( 1, 1, 1, 1 )
1/region = Rect2( 0, 0, 32, 32 )
1/tile_mode = 0
1/occluder_offset = Vector2( 0, 0 )
1/navigation_offset = Vector2( 0, 0 )
1/shape_offset = Vector2( 0, 0 )
1/shape_transform = Transform2D( 1, 0, 0, 1, 0, 0 )
1/shape = SubResource( 5 )
1/shape_one_way = false
1/shape_one_way_margin = 1.0
1/shapes = [ {
"autotile_coord": Vector2( 0, 0 ),
"one_way": false,
"one_way_margin": 1.0,
"shape": SubResource( 5 ),
"shape_transform": Transform2D( 1, 0, 0, 1, 0, 0 )
} ]
1/z_index = 0

[sub_resource type="RectangleShape2D" id=6]
extents = Vector2( 128, 21 )

[node name="TestLevel" type="Node2D" groups=["Level"]]

[node name="Camera2D" type="Camera2D" parent="."]
current = true

[node name="Player" parent="." instance=ExtResource( 1 )]
position = Vector2( -64, -16 )
z_index = 1

[node name="Label" type="Label" parent="Player"]
margin_left = -16.0
margin_top = -32.0
margin_right = 24.0
margin_bottom = -18.0

[node name="Portal" parent="." instance=ExtResource( 2 )]

[node name="Top" parent="Portal" index="0"]
position = Vector2( 0, -512 )

[node name="CollisionShape2D" parent="Portal/Top" index="0"]
position = Vector2( 0, 0 )

[node name="Bottom" parent="Portal" index="1"]
position = Vector2( 0, 512 )

[node name="Bottom2" parent="Portal" index="2"]
position = Vector2( 0, 568 )

[node name="Enemies" type="Node2D" parent="." groups=["EnemyGroup"]]

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource( 4 )
cell_size = Vector2( 32, 32 )
show_collision = true
format = 1
tile_data = PoolIntArray( -1245189, 1, 0, -1310716, 1, 0, -1179653, 1, 0, -1245180, 1, 0, -1114117, 1, 0, -1179644, 1, 0, -1048581, 1, 0, -1114108, 1, 0, -983045, 1, 0, -1048572, 1, 0, -917509, 1, 0, -983036, 1, 0, -983035, 1, 0, -851982, 1, 0, -851981, 1, 0, -851980, 1, 0, -851979, 1, 0, -851978, 1, 0, -851977, 1, 0, -851976, 1, 0, -851975, 1, 0, -851974, 1, 0, -851973, 1, 0, -917500, 1, 0, -917499, 1, 0, -917498, 1, 0, -917497, 1, 0, -917496, 1, 0, -917495, 1, 0, -917494, 1, 0, -917493, 1, 0, -917492, 1, 0, -917491, 1, 0, -786446, 1, 0, -851955, 1, 0, -720910, 1, 0, -786419, 1, 0, -655374, 1, 0, -655362, 1, 0, -655361, 1, 0, -720896, 1, 0, -720895, 1, 0, -720883, 1, 0, -589838, 1, 0, -589829, 1, 0, -589828, 1, 0, -589827, 1, 0, -589826, 1, 0, -589825, 1, 0, -655360, 1, 0, -655359, 1, 0, -655358, 1, 0, -655357, 1, 0, -655356, 1, 0, -655347, 1, 0, -524302, 1, 0, -589811, 1, 0, -458766, 1, 0, -524275, 1, 0, -393230, 1, 0, -393226, 1, 0, -393225, 1, 0, -393224, 1, 0, -393223, 1, 0, -458746, 1, 0, -458745, 1, 0, -458744, 1, 0, -458739, 1, 0, -327694, 1, 0, -393203, 1, 0, -262158, 1, 0, -327667, 1, 0, -196622, 1, 0, -262131, 1, 0, -131086, 1, 0, -131085, 1, 0, -131084, 1, 0, -131083, 1, 0, -131082, 1, 0, -131081, 1, 0, -131080, 1, 0, -131079, 1, 0, -196601, 1, 0, -196600, 1, 0, -196599, 1, 0, -196598, 1, 0, -196597, 1, 0, -196596, 1, 0, -196595, 1, 0, -65550, 1, 0, -131059, 1, 0, -14, 1, 0, -65523, 1, 0, 65522, 1, 0, 65533, 1, 0, 65534, 1, 0, 65535, 1, 0, 0, 1, 0, 1, 1, 0, 2, 1, 0, 13, 1, 0, 131058, 1, 0, 65549, 1, 0, 196594, 1, 0, 131085, 1, 0, 262130, 1, 0, 196621, 1, 0, 327666, 1, 0, 327667, 1, 0, 327668, 1, 0, 327669, 1, 0, 327670, 1, 0, 327671, 1, 0, 327672, 1, 0, 327673, 1, 0, 327674, 1, 0, 327675, 1, 0, 262148, 1, 0, 262149, 1, 0, 262150, 1, 0, 262151, 1, 0, 262152, 1, 0, 262153, 1, 0, 262154, 1, 0, 262155, 1, 0, 262156, 1, 0, 262157, 1, 0, 393202, 1, 0, 327693, 1, 0, 458738, 1, 0, 393229, 1, 0, 524274, 1, 0, 458765, 1, 0, 589810, 1, 0, 589822, 1, 0, 589823, 1, 0, 524288, 1, 0, 524289, 1, 0, 524301, 1, 0, 655346, 1, 0, 655351, 1, 0, 655352, 1, 0, 655353, 1, 0, 655354, 1, 0, 655355, 1, 0, 655356, 1, 0, 655357, 1, 0, 655358, 1, 0, 655359, 1, 0, 589824, 1, 0, 589825, 1, 0, 589826, 1, 0, 589827, 1, 0, 589828, 1, 0, 589829, 1, 0, 589830, 1, 0, 589831, 1, 0, 589832, 1, 0, 589837, 1, 0, 720882, 1, 0, 655373, 1, 0, 786418, 1, 0, 720909, 1, 0, 851954, 1, 0, 786445, 1, 0, 917490, 1, 0, 917491, 1, 0, 917492, 1, 0, 917493, 1, 0, 917494, 1, 0, 917495, 1, 0, 917496, 1, 0, 917497, 1, 0, 917498, 1, 0, 917499, 1, 0, 851972, 1, 0, 851973, 1, 0, 851974, 1, 0, 851975, 1, 0, 851976, 1, 0, 851977, 1, 0, 851978, 1, 0, 851979, 1, 0, 851980, 1, 0, 851981, 1, 0, 983035, 1, 0, 917508, 1, 0, 1048571, 1, 0, 983044, 1, 0, 1114107, 1, 0, 1048580, 1, 0, 1179643, 1, 0, 1114116, 1, 0, 1245179, 1, 0, 1179652, 1, 0 )

[node name="SpawnController" type="Node2D" parent="."]
script = ExtResource( 8 )

[node name="SpawnTimer" type="Timer" parent="SpawnController"]
wait_time = 5.0
one_shot = true
autostart = true

[node name="Positions" type="Node2D" parent="SpawnController"]

[node name="Position2D" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 0, -384 )

[node name="Position2D2" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -352, -352 )

[node name="Position2D3" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 360, -352 )

[node name="Position2D4" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 0, -192 )

[node name="Position2D5" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -256, 0 )

[node name="Position2D6" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -352, 0 )

[node name="Position2D7" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 352, 0 )

[node name="Position2D8" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 256, 0 )

[node name="Position2D9" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 0, 64 )

[node name="Position2D10" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 0, 192 )

[node name="Position2D11" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -256, 192 )

[node name="Position2D12" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -352, 224 )

[node name="Position2D13" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -352, 320 )

[node name="Position2D15" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 352, 320 )

[node name="Position2D16" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 352, 224 )

[node name="Position2D17" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 256, 192 )

[node name="Position2D18" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 192, 352 )

[node name="Position2D19" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -192, 352 )

[node name="Position2D20" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -256, -128 )

[node name="Position2D21" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 352, -160 )

[node name="Position2D24" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 256, -256 )

[node name="Position2D25" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -256, -256 )

[node name="Position2D22" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -352, -160 )

[node name="Position2D23" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 256, -128 )

[node name="Position2D14" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 0, 352 )

[node name="Position2D26" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( -120, -192 )

[node name="Position2D27" type="Position2D" parent="SpawnController/Positions"]
position = Vector2( 128, -192 )

[node name="Spawners" type="Node2D" parent="SpawnController" groups=["SpawnerGroup"]]

[node name="XPGroup" type="Node2D" parent="." groups=["XPGroup"]]

[node name="XP" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP26" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP27" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP28" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP29" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP30" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP31" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP32" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP33" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP34" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP35" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP36" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP37" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP38" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP39" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP40" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP41" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP42" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP43" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP44" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP45" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP46" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP47" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP48" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP49" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP50" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP51" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP52" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP53" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP54" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP55" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP56" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP57" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP58" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP59" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP60" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP61" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP62" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP63" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP64" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP65" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP66" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP67" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP68" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP69" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP70" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP71" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP6" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP7" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP8" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP9" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP10" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP11" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP12" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP13" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP14" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP15" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP16" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP17" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP18" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP19" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP20" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP21" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP22" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP23" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP24" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( -56, -80 )

[node name="XP25" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( 72, -56 )

[node name="XP2" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( 56, -120 )

[node name="XP3" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( 120, -96 )

[node name="XP4" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( 96, -24 )

[node name="XP5" parent="XPGroup" instance=ExtResource( 5 )]
position = Vector2( 32, -48 )

[node name="DiceBlocker" type="StaticBody2D" parent="."]
position = Vector2( 352, -592 )
collision_layer = 0
collision_mask = 32

[node name="CollisionShape2D" type="CollisionShape2D" parent="DiceBlocker"]
position = Vector2( 0, 11 )
shape = SubResource( 6 )

[node name="DiceController" type="Position2D" parent="." groups=["DiceSpawner"]]
position = Vector2( 0, -24 )
script = ExtResource( 9 )

[node name="Dice" parent="DiceController" instance=ExtResource( 4 )]
position = Vector2( 64, 8 )

[node name="Hud" type="Control" parent="."]
pause_mode = 2
anchor_right = 1.0
anchor_bottom = 1.0

[node name="LevelOptions" parent="Hud" instance=ExtResource( 7 )]

[node name="GameOverHud" type="Control" parent="Hud"]
margin_right = 40.0
margin_bottom = 40.0
script = ExtResource( 10 )

[node name="ColorRect" type="ColorRect" parent="Hud/GameOverHud"]
margin_left = -464.0
margin_top = -464.0
margin_right = 464.0
margin_bottom = 464.0
color = Color( 0, 0, 0, 1 )

[node name="Timer" type="Timer" parent="Hud/GameOverHud"]
one_shot = true

[node name="Text" type="Control" parent="Hud/GameOverHud"]
margin_right = 40.0
margin_bottom = 40.0

[node name="Label" type="Label" parent="Hud/GameOverHud/Text"]
margin_left = -71.0
margin_top = -255.0
margin_right = 70.0
margin_bottom = -224.0
text = "YOU SURVIVED:
 X minutes, Y seconds"
align = 1

[node name="Button" type="Button" parent="Hud/GameOverHud/Text"]
margin_left = -40.0
margin_top = 175.0
margin_right = 41.0
margin_bottom = 195.0
text = "TRY AGAIN"

[connection signal="timeout" from="SpawnController/SpawnTimer" to="SpawnController" method="_on_SpawnTimer_timeout"]
[connection signal="timeout" from="Hud/GameOverHud/Timer" to="Hud/GameOverHud" method="_on_Timer_timeout"]
[connection signal="pressed" from="Hud/GameOverHud/Text/Button" to="Hud/GameOverHud" method="_on_Button_pressed"]

[editable path="Portal"]
